(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=[].slice,H={}.hasOwnProperty,I=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};for(z=this,a=function(b){return b instanceof a?b:this instanceof a?void(this._wrapped=b):new a(b)},a.now=function(){return(Date.now||function(){return(new Date).getTime()})()},a.script_time=a.now(),D=0,a.CRLF="\r\n",C=a,s={log:1,info:2,warn:3,error:4,none:5},f={c:!1},u={ctxPath:"",basePath:"",logger:s.log,toStringEvent:!1,toStringShowType:!0,logPrefix:function(b){return">> "+b+" ["+a.when.log()+"]"},dateMask:{"default":"yyyy-mm-dd HH:MM:ss",log:"yyyy-mm-dd HH:MM:ss l",day:"yyyy-mm-dd",time:"HH:MM:ss",week:"dddd"},dateI18n:{day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}},c=Array.prototype.forEach,b=Array.prototype.filter,e={},m=encodeURIComponent,a.each=function(b,d,f){var g,h,i,j,k,l;if(null===b)return b;if(c&&b.forEach===c)b.forEach(d,f);else if(b.length===+b.length)for(g=0,k=b.length;;){if(k>g||d.call(f,b[g],g,b)===e)break;g++}else for(j=a.keys(b),h=0,l=j.length;l>h;h++)if(i=j[h],d.call(f,b[i],i,b)===e)return;return b},a.filter=function(c,d,e){var f;return f=[],null===c?f:b&&c.filter===b?c.filter(d,e):(a.each(c,function(a,b,c){d.call(e,a,b,c)&&f.push({index:a})}),f)},a.extend=function(b){return a.each(a.slice(arguments,1),function(a){var c;if(a)for(c in a)b[c]=a[c]}),b},a.capitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},l=function(b,c,d,e){return function(c){return b[e?e+a.capitalize(c):c]=d}(c)},a.type=function(a,b){var c;return null==b&&(b=!1),c=Object.prototype.toString.call(a),b?c:c.slice(8,-1)},i=["Arguments","Array","Boolean","Date","Error","Function","Null","Number","Object","RegExp","String","Undefined","global"],d=function(b){return l(C,b,function(c){return b===a.type(c)},"is")},o=0,r=i.length;r>o;o++)E=i[o],d(E);a.isFunc=a.isFunction,a.isWin=a.isGlobal,a.isJson=function(b){return"object"==typeof b&&a.isObject(b)&&!b.length},a.isEvent=function(b){return!(a.isNull(b)||a.isUndefined(b)||a.isUndefined(b.altKey)&&a.isUndefined(b.preventDefault))},a.isBlank=function(){var b,c,d,e,f;if(c=arguments[0],f=2<=arguments.length?G.call(arguments,1):[],c=a.isString(c)?a.trim(c):c,null!=f)for(d=0,b=f.length;b>d;d++)if(e=f[d],e===c)return!0;return a.isNull(c)||a.isUndefined(c)||a.isString(c)&&c.length<1||a.isJson(c)&&a.keys(c).length<1?!0:!1},a.isPlainObject=function(b){return a.isObject(b)&&!a.isWin(b)&&Object.getPrototypeOf(b)===Object.prototype},n=function(b,c,d){var e;e=d||C,l(e,b,function(){return a.isFunc(u[b])?u[b].apply(this,arguments):u[b]},"get"),l(e,b,function(a){return u[b]=a},"set"),u[b]=c},a.getset=function(b,c){var d,e,f,g,h,i;if(g={},a.isString(b))g[b]=null;else if(a.isArray(b))for(d=h=0,f=b.length;f>h;d=++h)i=b[d],g[i]=null;else{if(!a.isJson(b))throw new Error(a.type(arguments)+" is unsupported, supports 'string' or 'string array' or 'JSON object'.");g=b}for(e in g)i=g[e],n(e,i,c)},a.getset(u),a.getset(f,f),a.settings=function(){return u},a.clone=function(b){return a.isObject(b)?a.isArray(b)?b.slice():a.extend({},b):b},A=function(b,c,d,e){var f,g;f=a.isArray(c),g=a.isPlainObject(c),a.each(c,function(c,h){var j;j=a.type(c),e&&(h=d?e:e+"["+(g||j===i[8]||j===i[1]?h:"")+"]"),!e&&f?b.add(c.name,c.value):j===i[1]||!d&&j===i[8]?A(b,c,d,h):b.add(h,c)})},a.param=function(a,b){var c;return c=[],c.add=function(a,b){return this.push(m(a)+"="+m(b))},A(c,a,b),c.join("&").replace(/%20/g,"+")},a.getUrl=function(b,c){var d;return d=a.isBlank(c)?"":"?"+(a.isJson(c)?a.param(c):String(c)),/^http/.test(b)?b+d:a.getBasePath()+a.aroundIf(a.getCtxPath(),"/")+b+d},a.getUrlVars=function(){var a,b,c,d,e,f,g,h;if(h={},b=z.location.href,c=b.indexOf("?"),-1===c)return h;for(f=b.slice(c+1).split("&"),e=0,d=f.length;d>e;e++)g=f[e],a=g.split("="),h[a[0]]=a[1];return h},a.href=function(b,c){z.location.href=a.getUrl(b,c)},a.slice=function(b,c){return a.isArguments(b)?Array.prototype.slice.call(b,c):(b||[]).slice(c||0)},a.startWith=function(b,c){return new RegExp("^"+(a.isArray(c)?"["+c.join("|")+"]":c)).test(b)},a.endWith=function(b,c){return new RegExp((a.isArray(c)?"["+c.join("|")+"]":c)+"$").test(b)},a.startIf=function(b,c){return a.startWith(b,c)?b:c+b},a.endIf=function(b,c){return a.endWith(b,c)?b:b+c},a.aroundWith=function(b,c){return a.startWith(b,c)&&a.endWith(b,c)},a.aroundIf=function(b,c){return a.endIf(a.startIf(b,c),c)},a.prefix=function(a,b,c){return(Array(b).join(c||"0")+a).slice(-b)},a.suffix=function(a,b,c){return a+Array(b+1).join(c||"0").slice(a.length)},a.trim=function(b,c){return a.isString(b)?a.isUndefined(c)?b.replace(/(^\s*)|(\s*$)/g,""):b.replace(new RegExp("(^("+c+")*)|(("+c+")*$)","gi"),""):b},a.ltrim=function(b,c){return a.isString(b)?b.replace(new RegExp("(^"+(a.isBlank(c)?"\\s":c)+"*)"),""):b},a.rtrim=function(b,c){return a.isString(b)?b.replace(new RegExp("("+(a.isBlank(c)?"\\s":c)+"*$)"),""):b},a.randomStr=function(a){var b;for(b="";;)if(b+=Math.random().toString(36).substr(2),b.length>=a)break;return b.substr(0,a)},a.uniqueId=function(a){var b;return b=++D+"",a?a+b:b},a.times=function(a,b,c){var d,e;for(d=Array(Math.max(0,a)),e=0;;)if(d[e]=b.call(c,e),++e,e>=a)break;return d},a.delay=function(b,c){var d;return d=a.slice(arguments,2),setTimeout(function(){return b.apply(null,d)},c)},a.once=function(a){var b,c;return c=!1,b=null,function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},a.wrap=function(a,b){return function(){var c;return c=[a],Array.prototype.push.apply(c,arguments),b.apply(this,c)}},a.prop=function(a){return function(b){return b[a]}},a.format=function(b,c){return a.isArray(c)||(c=a.slice(arguments,1)),b.replace(/\{(\d+)\}/gm,function(b,d){var e;return e=c[d]||b,a.isObject(e)?g(e):e})},w=function(b,c){var d,e,f;if(a.isArray(b))d=b.indexOf(c),d>-1&&b.splice(d,1);else if(a.isJson(b))for(e in b)f=b[e],f===c&&delete b[e]},a.rmByVal=function(){var a,b,c,d,e;for(d=arguments[0],a=2<=arguments.length?G.call(arguments,1):[],c=0,b=a.length;b>c;c++)e=a[c],w(d,e);return d},a.getKey=function(a,b){var c,d;for(c in a)if(H.call(a,c)&&(d=a[c],d===b))return c;return null},a.has=function(b,c){return a.isBlank(b)?!1:a.isArray(b)?I.call(b,c)>=0:a.isObject(b)?c in b:Object.prototype.hasOwnProperty.call(b,c)},a.sleep=function(b){var c,d;for(d=a.now(),c=-1;;)if(c++,a.now()-d>=b)break},a.querySelector=function(a,b,c){return null==b&&(b=!1),null==c&&(c=document),b?c.querySelectorAll(a):c.querySelector(a)},a.query=function(){var b,c,d,e,f,g;switch(e=1<=arguments.length?G.call(arguments,0):[],d=e.length,g="",c=!1,d){case 1:case 2:case 3:g=e[0],2===d&&(a.isBoolean(e[1])?c=e[1]:b=e[1]),3===d&&(b=e[1],c=e[2])}if(b=b||document,/^[A-Za-z0-9]+$/.test(g)){if(f=a.querySelector(g,c,b),null!==f)return f;g="[name="+g+"]"}return a.querySelector(g,c,b)},a.chkParam=function(){var b,c,d,e;if(e=1<=arguments.length?G.call(arguments,0):[],d=e[0],c=e[1]||"",b=a.slice(e,2),!d)throw new Error(a.format(c,b));return!0},a.fillParam=function(){var b,c,d,e,f,g,h,i,j,k;switch(g=1<=arguments.length?G.call(arguments,0):[],c="",b=null,j=["div","span"],f=g.length){case 1:b=g[0];break;case 3:case 2:3===f&&(j=j.concat(a.isArray(g[2])?g[2]:[g[2]])),c=g[0],b=g[1]}c=a.startIf(c,"#");for(e in b)k=b[e],i=null,i=a.startWith(e,["#","\\."])?c+" "+e:c+" [name="+e+"]",d=a.query(i),a.isBlank(d)||(h=(d.tagName||"").toLowerCase(),I.call(j,h)>=0?d.innerHTML=k:d.value=k)},a.getParam=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;for(h=arguments[0],i=2<=arguments.length?G.call(arguments,1):[],h=a.startIf(h,"#"),e=["hidden","text","checkbox","password","tel","email","url","number","date","time","datetime","month"],j=["li"],d=["select"].concat(i),m=0,k=e.length;k>m;m++)q=e[m],d.push("input[type="+q+"]");if(c={},b=a.query(h),a.isBlank(b))return c;for(o=a.query(d.join(","),b,!0),n=0,l=o.length;l>n;n++)f=o[n],g=f.getAttribute("name"),(g||"").length>0&&(c[g]=a.has(f,"value")?(p=(f.tagName||"").toLowerCase(),I.call(j,p)>=0?f.innerText:a.trim(f.value)):f.innerHTML);return c},x=function(a){var b,c,d,e;c=[];for(b in a)e=a[b],c.push(b);return d=new RegExp(c.join("|"),"ig"),function(b){return b.replace(d,function(b,c,d,e,f){var g;return g=a[b]||g})}},a.replacer=function(a){return new x(a)},v=function(b,c,d,e){var f,g;if(f=d||C,a.has(f,b)&&!e)throw new Error("the given module is exists. "+b);f[b]=c,a.isFunc(c)&&f.mixin&&(g={},g[b]=c,f.mixin(g))},a.register=function(){var b,c,d,e;if(c=1<=arguments.length?G.call(arguments,0):[],a.isJson(c[0])){d=c[0];for(b in d)e=d[b],v(b,e,c[1],c[2])}else v.apply(this,arguments)},a.unregister=function(a,b){delete(b||C)[a]},a.methodRegister=function(a,b,c,d){l(a,b,c,d)},B=function(b,c){return(a.isUndefined(c)?a.getToStringShowType():c)?b:""},a.asStr=function(a,b,c){return g(a,b||"",c||!1)},a.rmEvtProp=function(b,c){var d,e,g,h;if(g={},a.isObject(b)&&a.isJson(b))for(e in b)h=b[e],a.isEvent(h)?(d=B("[object event]: ")+h.type,c&&(g[e]=d),a.isInfoEnabled()&&(f.getC().info("The "+d+" from property '"+e+"' below is event detail:"),f.getC().info(h))):g[e]=h;return g},g=function(b,c,d){var e,f,h,j,k,l,m,n,o,p,q,r,s,t,u;switch(j=[],r=c||a.CRLF,q=a.type(b),m=a.type(b,!0)+": ",t=g,q){case i[11]:case i[7]:case i[10]:case i[2]:case i[5]:case i[6]:j.push(B(m,d)+b);break;case i[3]:case i[9]:j.push(B(m,d)+String(b));break;case i[4]:j.push(B(m,d)+(b.stack||b));break;case i[0]:case i[1]:for(q===i[0]&&(b=a.slice(b)),f=[],s=0,p=b.length;p>s;s++)u=b[s],f.push("object"==typeof u?t(u,r,!1):u);j.push(B(m,d)+"["+r+f.join(","+r)+r+"]");break;case i[8]:if(a.getToStringEvent()||(b=a.rmEvtProp(b,!0)),z.JSON&&a.isJson(b))try{e=[],j.push(JSON.stringify(b,function(a,b){if("object"==typeof b&&null!==b){if(-1!==e.indexOf(b))return;e.push(b)}return b}))}catch(v){l=v,a.warn(l.message,"JSON.stringify ERROR (ignorable)")}break;default:h=[];for(o in b)H.call(b,o)&&(u=b[o],/^HTML/.test(q)?(n="innerHTML",k="documentElement",a.has(u,n)?u=u+" "+u[n]:a.has(u,k)&&(u=u+" "+u[k])):u=a.isJson(u)?t(u):u,h.push(o+": "+u));j.push(B(m,d)+"{"+r+h.join(","+r)+r+"}")}return j.join(r)},t=function(b,c){return l(C,b,function(a,d,e,f){return k({name:b,level:c},a,d,e,f)}),l(C,b+"Enabled",function(){return f.getC()&&parseInt(c)>=parseInt(a.getLogger())},"is"),l(C,b+"Enabled",function(){return a.setLogger(s[b])},"set")};for(q in s)F=s[q],F!==s.none&&t(q,F);k=function(b,c,d,e,h){var i,j;i=f.getC(),i&&parseInt(b.level)>=parseInt(a.getLogger())&&i[b.name]&&(j=a.getLogPrefix(b.name)+(d?d+a.CRLF:"")+g(c,e,h),i[b.name].call(i,j))},a.console=function(b,c){return a.isNull(b)?(f.setC(!1),b):((!f.getC()||c)&&(a.isFunc(b)?f.setC({log:b,info:b,warn:b,error:b}):a.isObject(b)?f.setC(b):a.isUndefined(z.console)||f.setC(z.console)),f.getC())},a.getLoggerName=function(b){return b=b||a.getLogger(),a.getKey(s,parseInt(b)>s.none?s.none:b)},h=function(){var b,c,d,e;return e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,c=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,b=function(b,c){return a.prefix(b,c||2)},function(f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u;if(a.isUndefined(g)&&a.isString(f)&&!/\d/.test(f)&&(g=f,f=void 0),q=a.getDateI18n(),o=a.getDateMask(),f=a.isBlank(f)?new Date:new Date(f),isNaN(f))throw SyntaxError("invalid date: "+f);return g=String(o[g]||g||o["default"]),"UTC:"===g.slice(0,4)&&(g=g.slice(4),h=!0),m=a.isBlank(h)?"get":"getUTC",n=f[m+"Date"](),i=f[m+"Day"](),r=f[m+"Month"](),u=f[m+"FullYear"](),j=f[m+"Hours"](),l=f[m+"Minutes"](),t=f[m+"Seconds"](),k=f[m+"Milliseconds"](),s=a.isBlank(h)?f.getTimezoneOffset():0,p={d:n,dd:b(n),ddd:q.day[i],dddd:q.day[i+7],m:r+1,mm:b(r+1),mmm:q.month[r],mmmm:q.month[r+12],yy:String(u).slice(2),yyyy:u,h:j%12||12,hh:b(j%12||12),H:j,HH:b(j),M:l,MM:b(l),s:t,ss:b(t),l:b(k,3),L:b(k>99?Math.round(k/10):k),t:12>j?"a":"p",tt:12>j?"am":"pm",T:12>j?"A":"P",TT:12>j?"AM":"PM",Z:h?"UTC":(String(f).match(c)||[""]).pop().replace(d,""),o:(s>0?"-":"+")+b(100*Math.floor(Math.abs(s)/60)+Math.abs(s)%60,4),S:["th","st","nd","rd"][n%10>3?0:(n%100-n%10!==10)*n%10]},g.replace(e,function(a){return a in p?p[a]:a.slice(1,a.length-1)})}},h=h(),a.addDateMask=function(b){return a.extend(u.dateMask,b||{})},a.dateFmt=function(a,b,c){return h(a,b,c)},a.keys=function(b,c){var d;if(null==c&&(c=function(){return!0}),a.isObject(b)&&Object.keys)return Object.keys(b);d=[];for(q in b)H.call(b,q)&&(F=b[q],c(F,q)&&d.push(q));return d},a.vals=function(b){var c,d,e,f,g,h;for(c=a.keys(b),d=c.length,h=new Array(d),g=[],f=0,e=c.length;e>f;f++)q=c[f],g.push(b[q]);return g},a.funcs=function(b){return a.keys(b,function(b){return a.isFunc(b)})},j=function(b,c){return a.prototype[b]=function(){var b;return b=[this._wrapped],Array.prototype.push.apply(b,arguments),y.call(this,c.apply(a,b))}},a.mixin=function(b){var c,d,e,f,g;for(g=a.funcs(b),f=0,d=g.length;d>f;f++)e=g[f],c=a[e]=b[e],j(e,c)},y=function(b){return this._chain?a(b).chain():b},a.mixin(a),a.chain=function(b){return a(b).chain()},a.prototype.chain=function(){return this._chain=!0,this},a.prototype.value=function(){return this._wrapped},function(a,b){var c;c=function(b,c,d){return a.dateFmt(c,b,d)},a.each(a.getDateMask(),function(b,d){a.methodRegister(c,d,function(c,d){return a.dateFmt(c,b,d)})}),a.register(b,c)}(C,"when"),function(a,b){var c,d,e,f,g,h;e=function(a){return c(a)},e.reverse=function(a){return h(a)},d=function(a,b){return p[b-1]},f=function(a){return new Array(a+1).join("	")},g=function(b,c,d){var e,f,g,h;return g="",e=a.trim(b),f=e.split(c),f.length>0?(h=[],a.each(f,function(b,c){h.push(a.trim(b))}),g=h.join(d?"":c)):g=e,g},h=function(b){var c;return a.isBlank(b)?"{}":(c=g(b,"\n"),c=g(c,"["),c=g(c,"]"),c=g(c,"{"),c=g(c,"}"),c=g(c,","),c=g(c,":"))},c=function(b){var c,e,g,h,i,j;if(a.isBlank(b))return"{}";for(h="",g=0,e=i=0,j=b.length;j>=0?j>i:i>j;e=j>=0?++i:--i)switch(c=b.charAt(e)){case"{":case"[":h+=c+"\n"+f(++g);break;case"}":case"]":h+="\n"+f(--g)+c;break;case",":h+=",\n"+f(g);break;case":":h+=": ";break;default:h+=c}return h=h.replace(/\[[\d,\s]+?\]/g,function(a){return a.replace(/\s/g,"")}).replace(/\\(\d+)\\/g,d).replace(/\\(\d+)\\/g,d)},a.register(b,e)}(C,"json"),function(a,b){"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=a:(z.kiwi=z[b]=a,"function"==typeof define&&define.amd&&define(b,[],function(){return a}),"function"==typeof define&&define.cmd&&define(function(c,d,e){d[b]=a}))}(C,"lemon")}).call(this);